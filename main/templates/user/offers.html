{% extends 'user/dashboard_base.html' %}
{% load static %}
{% block content %}
{% if user.is_authenticated %}
<!--Sidebar-->
{% include 'user/user-sidebar.html' %}
<!-- Main -->
<div class="col-span-4 bg-gray-100 ">
   <!-- Nav -->
   <nav class="bg-white top-0 border-gray-200 dark:bg-gray-900">
      <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
         <div class="flex items-center static md:order-2">
            <button type="button" class="flex  items-center space-x-2 rounded-full border-2 p-2 static mr-3 text-sm rounded-full md:mr-0 focus:ring-4 focus:ring-gray-300" id="user-menu-button" aria-expanded="false" data-dropdown-toggle="user-dropdown" data-dropdown-placement="bottom">
               <span class="sr-only">Open user menu</span>
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="relative h-6 w-6 flex-shrink-0 flex-grow-0" preserveAspectRatio="xMidYMid meet">
                  <path d="M1.5 12H22.5" stroke="#717171" stroke-width="3"></path>
                  <path d="M1.5 18H22.5" stroke="#717171" stroke-width="3"></path>
                  <path d="M1.5 6H22.5" stroke="#717171" stroke-width="3"></path>
               </svg>
               <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="relative h-8 w-8 flex-shrink-0 flex-grow-0" preserveAspectRatio="none">
                  <g clip-path="url(#clip0_403_153)">
                     <path d="M16 0.699997C7.56295 0.699997 0.699951 7.563 0.699951 16C0.699951 24.437 7.56295 31.3 16 31.3C24.437 31.3 31.2999 24.437 31.2999 16C31.2999 7.563 24.437 0.699997 16 0.699997ZM16 28.7C11.979 28.7 8.39495 26.816 6.06695 23.89C7.68856 21.7682 9.95064 20.2253 12.518 19.49C11.5936 18.9028 10.8323 18.0918 10.3048 17.1321C9.77719 16.1724 9.50038 15.0951 9.49995 14C9.49995 10.416 12.416 7.5 16 7.5C19.584 7.5 22.5 10.416 22.5 14C22.499 15.0953 22.2219 16.1726 21.6942 17.1324C21.1665 18.0922 20.4053 18.9034 19.481 19.491C22.0488 20.2258 24.3113 21.7687 25.933 23.891C23.6049 26.816 20.021 28.7 16 28.7Z" fill="#717171"></path>
                  </g>
                  <circle cx="27" cy="5" r="4.5" fill="#5E2987" stroke="white"></circle>
                  <defs>
                     <clipPath id="clip0_403_153">
                        <rect width="32" height="32" fill="white"></rect>
                     </clipPath>
                  </defs>
               </svg>
            </button>
            <!-- Dropdown menu -->
            <div class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600" id="user-dropdown">
               <div class="px-4 py-3">
                  <span class="block text-sm text-gray-900 dark:text-white">{{ user.first_name }} {{ user.last_name }}</span>
                  <span class="block text-sm  text-gray-500 truncate dark:text-gray-400">{{ user.email}}</span>
               </div>
               <ul class="py-2" aria-labelledby="user-menu-button">
                  <li>
                     <a href="{% url 'my_dashboard' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">Dashboard</a>
                  </li>
                  <li>
                     <a href="{% url 'edit-profile' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">Settings</a>
                  </li>
                  <li>
                     <a href="{% url 'accounts:logout' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white">Sign out</a>
                  </li>
               </ul>
            </div>
            <button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false">
               <span class="sr-only">Open main menu</span>
               <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
               </svg>
            </button>
         </div>
         <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1">
            <form class="flex items-center rounded-full py-2 md:border-2 md:shadow-sm" action="/search">
               <input name="q" type="text" class="flex-grow bg-transparent border-transparent rounded-full pl-5 text-center text-gray-600 placeholder-gray-400 outline-none" placeholder="Search by location" />
               <!-- <div class="h-8 w-px flex-shrink-0 flex-grow-0 bg-[#ebebeb]"></div>
                  <input name="q" type="text" class="flex-grow bg-transparent border-transparent rounded-full pl-2 text-center text-gray-600 placeholder-gray-400 outline-none" placeholder="city" /> --> 
               <div class="input-group-append">
                  <button class="hidden h-8 cursor-pointer rounded-full bg-purple-900 p-2 text-white md:mx-2 md:inline-flex" type="submit" id="button-addon2">
                     <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="relative h-4 w-4" preserveAspectRatio="xMidYMid meet">
                        <path d="M14.2716 13.1684L11.3313 10.2281C12.0391 9.28573 12.4213 8.13865 12.42 6.96C12.42 3.94938 9.97063 1.5 6.96 1.5C3.94938 1.5 1.5 3.94938 1.5 6.96C1.5 9.97063 3.94938 12.42 6.96 12.42C8.13865 12.4213 9.28573 12.0391 10.2281 11.3313L13.1684 14.2716C13.3173 14.4046 13.5114 14.4756 13.711 14.47C13.9105 14.4645 14.1004 14.3827 14.2415 14.2415C14.3827 14.1004 14.4645 13.9105 14.47 13.711C14.4756 13.5114 14.4046 13.3173 14.2716 13.1684V13.1684ZM3.06 6.96C3.06 6.18865 3.28873 5.43463 3.71727 4.79328C4.14581 4.15192 4.7549 3.65205 5.46754 3.35687C6.18017 3.06169 6.96433 2.98446 7.72085 3.13494C8.47738 3.28542 9.17229 3.65686 9.71772 4.20228C10.2631 4.74771 10.6346 5.44262 10.7851 6.19915C10.9355 6.95567 10.8583 7.73983 10.5631 8.45247C10.2679 9.1651 9.76808 9.77419 9.12673 10.2027C8.48537 10.6313 7.73135 10.86 6.96 10.86C5.92604 10.8588 4.93478 10.4475 4.20365 9.71635C3.47253 8.98522 3.06124 7.99396 3.06 6.96V6.96Z" fill="white"></path>
                     </svg>
                  </button>
               </div>
            </form>
         </div>
         <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="mobile-menu-2">
            <ul class="flex flex-col  mr-3 font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
               <li>
                  <a href="{% url 'swapt_create' %}" class="block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-purple-700 md:p-0 dark:text-white md:dark:hover:text-purple-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Create a Listing</a>
               </li>
               <li>
                  <a href="{% url 'cart' %}" class="block py-2 pl-3 pr-4 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-purple-700 md:p-0 dark:text-white md:dark:hover:text-purple-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700" aria-current="page"><img class="dark:hidden" src="https://tuk-cdn.s3.amazonaws.com/can-uploader/navigation-V-svg4.svg" alt="cart" /></a>
               </li>
            </ul>
         </div>
      </div>
   </nav>
   <!-- /Nav -->
   <!-- Main Section -->
   <section class="px-8 py-6">
      <section class="grid grid-cols-4 gap-x-6 mt-6">
         <!-- edit form -->
         <section class="col-span-4">
            <div class="grid grid-cols-1 gap-x-4 mt-4 ">
               <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                    <tr>
                        <th scope="col" class="px-6 py-3">
                            Image 
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Listing
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Price
                        </th>
                        <th scope="col" class="px-6 py-3">
                            Offer Message
                        </th>
                        <th scope="col" class="px-6 py-3">
                         Offer Amount
                     </th>
                    </tr>
                </thead>
                <tbody>
                    {% for offer in offers %}
                  <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                    <td class="w-32 p-4">
                        <img width="100" src="/media/{{offer.product.productattribute_set.first.image}}" alt="{{offer.product.title}}">
                     </td>
                     <td class="px-6 py-4 font-semibold font-quicksand text-gray-900 dark:text-white"><a href="/product/{{offer.product.slug}}/{{offer.product.id}}">{{offer.product.title}}</a></td>
                     <td class="px-6 py-4 font-semibold font-quicksand text-gray-900 dark:text-white">{{offer.product.productattribute_set.first.price}}</td>
                     <td class="px-6 py-4 font-semibold font-quicksand text-gray-900 dark:text-white">{{offer.message}}</td>
                     <td class="px-6 py-4 font-semibold font-quicksand text-gray-900 dark:text-white">{{offer.amount}}</td>
                  </tr>
                  {% endfor %}
                </tbody>  
               </table>
            </div>
         </section>
         <!-- /edit form -->
      </section>
   </section>
   <!-- /Main Section -->
</div>
{% endif %}
<!-- /Main -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="text/javascript">
   const labels = {{monthNumber|safe}};
   const data = {
     labels: labels,
     datasets: [{
       label: 'Orders By Month',
       backgroundColor: 'rgb(255, 99, 132)',
       borderColor: 'rgb(255, 99, 132)',
       data: {{totalOrders}},
     }]
   };
   
   const config = {
     type: 'bar',
     data,
     options: {}
   };
   
   var myChart = new Chart(
       document.getElementById('myChart'),
       config
    	);
   
</script>
{% endblock %}